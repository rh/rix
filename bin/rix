#!/usr/bin/env ruby

$:.unshift File.join(File.dirname(__FILE__), %w[.. lib])

require 'rix'
require 'optparse'

if ARGV.size == 0
  puts "Type 'rix --help' for usage."
  exit 0
elsif not ARGV[0].start_with? '-'
  name = ARGV.shift
  command = Rix::Command[name]
  command.execute
else
  opts = OptionParser.new do |opts|
    opts.on("-v", "--version") { puts Rix::VERSION; exit 0 }
    opts.on("-h", "--help")    { puts Rix::HELP;    exit 0 }
  end
  begin
    opts.parse!
  rescue OptionParser::InvalidOption => e
    puts "#{e.to_s.capitalize}. Type 'rix --help' for usage."
    exit 1
  end
end
